<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="user">

	<typeAlias alias="user" type="cuijingtao.grid.domain.User" />
	<typeAlias alias="card" type="cuijingtao.grid.domain.CardInfo" />

	<select id="getAllUser" resultClass="java.util.HashMap" parameterClass="user" remapResults="true">
		select id,username,password,name,phone,email,addr
		from user
		
		LIMIT #currPage#,#pageSize#
		
    </select>
    
    <select id="getUserCount" resultClass="int" parameterClass="user">
		SELECT COUNT(*)
		FROM user
		
		
   </select>
   <insert id="addUser" parameterClass="user">
   	insert into user(username,password,name,phone,email,addr)
   	values(#username#,#password#,#name#,#phone#,#email#,#addr#)
   
   </insert>
   <update id="editUser" parameterClass="user">
   	update user
   	set username=#username#,password=#password#,name=#name#,phone=#phone#,email=#email#,addr=#addr#
   	where id=#id#
   	
   </update>
   
   	<select id="getCardInfo" resultClass="java.util.HashMap" parameterClass="card" remapResults="true">
		select cardno,cardname,cardfrom,cardstate
		from cardinfo
		where parentid=#parentid#
		LIMIT #currPage#,#pageSize#
		
    </select>
    <select id="getCardCount" resultClass="int" parameterClass="card">
		SELECT COUNT(*)
		FROM cardinfo
		where parentid=#parentid#
		
		
   </select>
  
</sqlMap>